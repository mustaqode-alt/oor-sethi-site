<!DOCTYPE html>
<html>
<head>
    <title>Redirecting...</title>
    <script type="text/javascript">
        // URLs for your app on the App Store and Play Store
        var appStoreUrl = 'https://apps.apple.com/app/idYOUR_APP_ID';
        var playStoreUrl = 'https://play.google.com/store/apps/details?id=YOUR.PACKAGE.ID';

        // Your app's custom URL scheme or Universal Link
        var appCustomScheme = 'yourapp://home';

        // Function to detect iOS devices
        function isIOS() {
            return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        }

        // Function to detect Android devices
        function isAndroid() {
            return /Android/.test(navigator.userAgent);
        }

        // Redirect to the app or app store based on the device
        function redirectToAppOrStore() {
            // Get query parameters
            var queryParams = new URLSearchParams(window.location.search);
            var id = queryParams.get('id');
            var tab = queryParams.get('tab');

            // Construct the deep link URL
            var deepLinkUrl = appCustomScheme;
            if (id && tab) {
                deepLinkUrl += '?id=' + encodeURIComponent(id) + '&tab=' + encodeURIComponent(tab);
            }

            if (isIOS()) {
                // Attempt to open the app using the deep link on iOS devices
                window.location.href = deepLinkUrl;
                setTimeout(function() {
                    // Redirect to the App Store if the app is not opened
                    window.location.href = appStoreUrl;
                }, 2500);
            } else if (isAndroid()) {
                // Attempt to open the app using the deep link on Android devices
                window.location.href = deepLinkUrl;
                setTimeout(function() {
                    // Redirect to the Play Store if the app is not opened
                    window.location.href = playStoreUrl;
                }, 2500);
            } else {
                // For non-mobile devices, show options or redirect to a landing page
                // ...
            }
        }

        // Call the redirect function as soon as the script loads
        redirectToAppOrStore();
    </script>
</head>
<body>
    <p>Redirecting...</p>
    <!-- Optional: Add links to both stores in case the JavaScript fails -->
    <a href="https://apps.apple.com/app/idYOUR_APP_ID">iOS App Store</a>
    <a href="https://play.google.com/store/apps/details?id=YOUR.PACKAGE.ID">Google Play Store</a>
</body>
</html>
